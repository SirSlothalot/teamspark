doctype html
html
  head
    title= title
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js')
    script(src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js", integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa", crossorigin="anonymous")
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css')
    link(rel='stylesheet', href='/stylesheets/style.css')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    
    script(src="/socket.io/socket.io.js")
    script(src="http://code.jquery.com/jquery-1.11.1.js")
    //- script.
      //- console.log('loading script');
      //- if(user)
      //-   var socket = io();
      //-   console.log('connected');
      //-   socket.emit("add-user", {"username": '#{user.username}'});
      //-   
      //-   socket.on("notification", function(data){
      //-     //add notifaction popup on top left of screen
      //-   });
      //- 
      //- function send(){
      //-   console.log('send');
      //-   var message = document.getElementById('message');
      //-   socket.emit('message', message.value);
      //-   message.value = '';
      //- };
      //- 
      //- 
      //- socket.on('message', function(msg){
      //-   var messages = document.getElementById('messages');
      //-   var newText = document.createElement('li');
      //-   newText.innerHTML = msg;
      //-   messages.appendChild(newText);
      //- });
    
  body(onload="selectionMatcher()")
    nav.navbar.navbar-fixed-top.navbar-inverse.bg-faded( role="navigation" )
      .container-fluid
        .navbar-header
          button.navbar-toggle.collapsed( type="button", data-toggle="collapse", data-target="#navbar-inverse", aria-expanded="false", aria-controls="navbar")
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand(href='/')
            | Teamspark
        if (!user)
          #navbar-inverse.collapse.navbar-collapse
            ul.nav.navbar-nav
              li: a( href="/contact" ) Contact
              li.dropdown
                a.dropdown-toggle( href="#", data-toggle="dropdown", role="button", aria-expanded="false" ) About
                  span.caret
                ul.dropdown-menu( role="menu")
                  li: a(href="")
                    span.glyphicon.glyphicon-question-sign
                    |  How Teamspark Works
                  li: a(href="")
                    span.glyphicon.glyphicon-floppy-disk
                    |  Our Matching Algorithm
                  li: a(href="")
                    span.glyphicon.glyphicon-wrench
                    |  Testing and Validation Strategies
                  li: a(href="/about/creators")
                    span.glyphicon.glyphicon-briefcase
                    |  The Team Behind Teamspark

                  
            ul.nav.navbar-nav.navbar-right
              li: a( href="/register")
                span.glyphicon.glyphicon-user
                |  Register
              li: a( href="/login")
                span.glyphicon.glyphicon-log-in
                |  Login
        if (user)
          #navbar-inverse.collapse.navbar-collapse
            ul.nav.navbar-nav
              li: a( href="/contact" ) Contact
              li.dropdown
                a.dropdown-toggle( href="#", data-toggle="dropdown", role="button", aria-expanded="false" ) About
                  span.caret
                ul.dropdown-menu( role="menu")
                  li: a(href="")
                    span.glyphicon.glyphicon-question-sign
                    |  How Teamspark Works
                  li: a(href="")
                    span.glyphicon.glyphicon-floppy-disk
                    |  Our Matching Algorithm
                  li: a(href="")
                    span.glyphicon.glyphicon-wrench
                    |  Testing and Validation Strategies
                  li: a(href="/about/creators")
                    span.glyphicon.glyphicon-briefcase
                    |  The Team Behind Teamspark
              li.dropdown
                a.dropdown-toggle( href="#", data-toggle="dropdown", role="button", aria-expanded="false" ) Project
                  span.caret
                ul.dropdown-menu( role="menu" )
                  if (user.myProject)
                    li: a( href="/project/#{user.myProject}" )
                      span.glyphicon.glyphicon-list
                      |  My Project
                    li: a( href="/project/#{user.myProject}/chat" )
                      span.glyphicon.glyphicon-comment
                      |  Open Chat
                    if (user.isOwner)
                      li.divider(role='separator')
                      li: a( href="/project/#{user.myProject}/edit" )
                        span.glyphicon.glyphicon-edit
                        |  Edit Project
                    
                  if (!user.myProject)
                    li: a( href="/project/new" )
                      span.glyphicon.glyphicon-education
                      |  Create Project
              li.dropdown
                a.dropdown-toggle( href="#", data-toggle="dropdown", role="button", aria-expanded="false" ) Explore
                  span.caret
                ul.dropdown-menu( role="menu" )
                  if (user.myProject)
                    li: a( href="/project/#{user.myProject}/view" )
                      span.glyphicon.glyphicon-user
                      |  People
                  if(!user.myProject)
                    li: a( href= "/user/#{user.username}/view")
                      span.glyphicon.glyphicon-th-list
                      |  Projects

            ul.nav.navbar-nav.navbar-right
              li.dropdown
                a.dropdown-toggle( href="#", data-toggle="dropdown", role="button", aria-expanded="false" ) Profile
                  span.caret
                ul.dropdown-menu( role="menu" )
                  li: a( href="/user/#{user.username}" )
                    span.glyphicon.glyphicon-user
                    |  View Profile
                  li: a( href="/user/#{user.username}/edit" )
                    span.glyphicon.glyphicon-edit
                    |  Edit Profile
              li: a( href="/logout")
                span.glyphicon.glyphicon-log-out
                |  Logout

    block content

    footer
      //br
      //p#location(style="color:gray; font-size:15px; text-align:center")
      //br
      .footer-upper
        .social-icons
            li
              a.social-icon(href='https://www.facebook.com')
                i.transition-colour.fa.fa-facebook
            li
              a.social-icon(href='https://www.twitter.com')
                i.transition-colour.fa.fa-twitter
            li
              a.social-icon(href='https://www.plus.google.com')
                i.transition-colour.fa.fa-google-plus
            li
              a.social-icon(href='https://www.github.com')
                i.transition-colour.fa.fa-github
            li
              a.social-icon(href='https://www.youtube.com')
                i.transition-colour.fa.fa-youtube


  script(src="/javascripts/ui.js")
  script(src="/javascripts/jQuery.succinct.min.js")
  script(src="/javascripts/opt.js")
